var Maze=function(t,o){this.width=t,this.height=o,this.startX=null,this.startY=null,this.startOrientation=null,this.endX=null,this.endY=null};Maze.prototype.setStart=function(t,o,r){this.startX=t,this.startY=o,this.startOrientation=r},Maze.prototype.setEnd=function(t,o){this.endX=t,this.endY=o},Maze.prototype.initualize=function(){this.space=new Array(this.width);for(var t=0;t<this.width;t++){this.space[t]=new Array(this.height);for(var o=0;o<this.height;o++)this.space[t][o]={north:!1,south:!1,west:!1,east:!1}}for(var t=0;t<this.width;t++)this.space[t][0].south=!0;for(var t=0;t<this.height;t++)this.space[0][t].west=!0;for(var t=0,o=this.width-1;t<this.height;t++)this.space[o][t].east=!0;for(var t=0,o=this.height-1;t<this.width;t++)this.space[t][o].north=!0;for(var r in this.space[this.startX][this.startY])this.space[this.startX][this.startY][r]=!1;for(var r in this.space[this.endX][this.endX])this.space[this.endX][this.endX][r]=!1},Maze.prototype.setWall=function(t,o,r){this.space[t][o][r]=!0};var Robot=function(){this.robotX=m.startX,this.robotY=m.startY,this.robotOrientation=m.startOrientation};Robot.prototype.moveForward=function(){"east"!==this.robotOrientation||m.space[this.robotX][this.robotY].east||m.space[this.robotX+1][this.robotY].west||this.robotX++,"west"!==this.robotOrientation||m.space[this.robotX][this.robotY].west||m.space[this.robotX-1][this.robotY].east||this.robotX--,"north"!==this.robotOrientation||m.space[this.robotX][this.robotY].north||m.space[this.robotX][this.robotY+1].south||this.robotY++,"south"!==this.robotOrientation||m.space[this.robotX][this.robotY].south||m.space[this.robotX][this.robotY-1].north||this.robotY--},Robot.prototype.turnLeft=function(){this.robotOrientation="east"===this.robotOrientation?"north":"west"===this.robotOrientation?"south":"north"===this.robotOrientation?"west":"east"},Robot.prototype.turnRight=function(){this.turnLeft(),this.turnLeft(),this.turnLeft()},Robot.prototype.turnBack=function(){this.turnLeft(),this.turnLeft()},Robot.prototype.turnTo=function(t){this.robotOrientation=t},Robot.prototype.startOver=function(){this.robotX=m.startX,this.robotY=m.startY,this.robotOrientation=m.startOrientation},$(function(){function t(){html="<table>";for(var t=m.height-1;t>=0;t--){html+="<tr>";for(var o=0;o<m.width;o++){html+='<td id="space-'+o+"_"+t+'" class="';for(var r in m.space[o][t])m.space[o][t][r]===!0&&(html+=r+" ");html+='"></td>'}html+="</tr>"}return html+="</table>"}function o(o,s){"startGame"===o?($("#maze-robot").html(t()),$("#space-"+r.robotX+"_"+r.robotY).addClass("robot face-"+r.robotOrientation)):"moveForward"===o||"startOver"===o?($("td").removeClass("robot"),r[o](),$("#space-"+r.robotX+"_"+r.robotY).addClass("robot face-"+r.robotOrientation)):($("td").removeClass(function(t,o){return(o.match(/(^|\s)face-\S+/g)||[]).join(" ")}),r[o](s),$("#space-"+r.robotX+"_"+r.robotY).addClass("face-"+r.robotOrientation))}$("button.robot-control").click(function(){o($(this).attr("name"))}),$("body").keydown(function(t){t.preventDefault();var s,i=t.which||t.keyCode;switch(i){case 37:s="west";break;case 38:s="north";break;case 39:s="east";break;case 40:s="south"}s!==r.robotOrientation?o("turnTo",s):o("moveForward")})});